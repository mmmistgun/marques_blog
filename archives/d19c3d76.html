<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-mistgun.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-mistgun.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.marques22.com",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!0,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="2019泰迪杯数据分析技能赛B题心得 虽说泰迪杯技能赛不太热门，但想要拿奖还是要花点时间。全称是泰迪杯数据分析职业技能大赛。重点在于数据处理与分析，比的是数据的洞察力和敏感程度。再辅以编程基础与搜索能力完成比赛。"><meta property="og:type" content="article"><meta property="og:title" content="2019泰迪杯数据分析技能赛B题心得 "><meta property="og:url" content="https://blog.marques22.com/archives/d19c3d76.html"><meta property="og:site_name" content="Marques&#39; Blog"><meta property="og:description" content="2019泰迪杯数据分析技能赛B题心得 虽说泰迪杯技能赛不太热门，但想要拿奖还是要花点时间。全称是泰迪杯数据分析职业技能大赛。重点在于数据处理与分析，比的是数据的洞察力和敏感程度。再辅以编程基础与搜索能力完成比赛。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i.loli.net/2020/09/15/E7pxrKX5SJt8DRl.png"><meta property="og:image" content="https://i.loli.net/2020/09/15/yhlmiRPCbfSk7Ud.png"><meta property="og:image" content="https://i.loli.net/2020/09/15/4LI9GolaJxsNUkD.png"><meta property="og:image" content="https://i.loli.net/2020/09/15/tkSGU63l8RfpZTP.png"><meta property="og:image" content="https://i.loli.net/2020/09/15/Tb3GkEUpQwr7a6X.png"><meta property="article:published_time" content="2020-09-15T14:21:00.000Z"><meta property="article:modified_time" content="2021-08-18T05:37:42.704Z"><meta property="article:author" content="Marques"><meta property="article:tag" content="泰迪杯"><meta property="article:tag" content="数据分析"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.loli.net/2020/09/15/E7pxrKX5SJt8DRl.png"><link rel="canonical" href="https://blog.marques22.com/archives/d19c3d76.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>2019泰迪杯数据分析技能赛B题心得 | Marques' Blog</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145116812-1"></script><script data-pjax>if(CONFIG.hostname===location.hostname){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-145116812-1")}</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Marques' Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Marques' Blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">随缘更新</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i> 站点地图</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/mmmistgun" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.marques22.com/archives/d19c3d76.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Marques"><meta itemprop="description" content="Linux系统，计算机网络，深度学习分享"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Marques' Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> 2019泰迪杯数据分析技能赛B题心得</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-09-15 22:21:00" itemprop="dateCreated datePublished" datetime="2020-09-15T22:21:00+08:00">2020-09-15</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-08-18 13:37:42" itemprop="dateModified" datetime="2021-08-18T13:37:42+08:00">2021-08-18</time></span><span id="/archives/d19c3d76.html" class="post-meta-item leancloud_visitors" data-flag-title="2019泰迪杯数据分析技能赛B题心得 " title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/d19c3d76.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/d19c3d76.html" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>3.6k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>4 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="2019泰迪杯数据分析技能赛B题心得"><a href="#2019泰迪杯数据分析技能赛B题心得" class="headerlink" title="2019泰迪杯数据分析技能赛B题心得"></a>2019泰迪杯数据分析技能赛B题心得</h1><p> 虽说泰迪杯技能赛不太热门，但想要拿奖还是要花点时间。全称是<a target="_blank" rel="noopener" href="https://www.tipdm.org/bdrace/jljingsai/">泰迪杯数据分析职业技能大赛</a>。重点在于数据处理与分析，比的是数据的洞察力和敏感程度。再辅以编程基础与搜索能力完成比赛。</p><span id="more"></span><p>在2019年，两道题分别是超市销售分析和校园卡消费分析。前者只可以通过编程解决，使用excel会扣分。但是我们可以通过excel来验证我们的想法，并将excel操作通过代码来实现。后者可以通过官方提供的数据分析工具解决也可以通过编程解决。但去年B题官方一边比赛，一边对其工具进行debug，体验不太友好。</p><p>要想获奖还要关注官方的线上辅导直播，特别是赛前的那几次。一般会明确赛题的导向和技术要点。比如因为前年技能赛，官方没有考虑到大家爬虫的威力，直接服务器被爬崩了，在去年的赛前直播中就谈到了暂时取消爬虫环节直接提供数据，这样可以减少一些不必要的付出。但是今年可能要注意，官网放出的竞赛内容中提到了数据采集与爬虫技术，以及数据保存。这个结尾再谈。</p><p>下面是我们小组完成A题的思路。<br>语言选择：python<br>使用库：pandas，numpy， matlibplot， wordcloud<br>代码：<br>GitHub：<a target="_blank" rel="noopener" href="https://github.com/mmmistgun/Tipdm_Data_Analysis_II">https://github.com/mmmistgun/Tipdm_Data_Analysis_II</a><br>Gitee：<a target="_blank" rel="noopener" href="https://gitee.com/mistgun19/Tipdm_Data_Analysis_II">https://gitee.com/mistgun19/Tipdm_Data_Analysis_II</a><br>Gitea：<a target="_blank" rel="noopener" href="http://esc.mistgun.cn:3000/marques/Tipdm_Data_Analysis_II">http://esc.mistgun.cn:3000/marques/Tipdm_Data_Analysis_II</a><br>CodeChina: <a target="_blank" rel="noopener" href="https://codechina.csdn.net/MISTGUN/tipdm_data_analysis_ii">https://codechina.csdn.net/MISTGUN/tipdm_data_analysis_ii</a></p><h2 id="读取官方数据"><a href="#读取官方数据" class="headerlink" title="读取官方数据"></a>读取官方数据</h2><p>数据特点：</p><ol><li>官方给的是csv文件，使用文本编辑器打开，可以发现其分隔符是“，”逗号，使用文本相关的库打开进行处理是不实际的。后期分离不同的数据操作比较耗时。</li><li>官方给的数据非常庞大，数据有7W多条，每条有9列。</li></ol><h3 id="方案一-openpyxl库"><a href="#方案一-openpyxl库" class="headerlink" title="方案一 openpyxl库"></a>方案一 openpyxl库</h3><p>这是个适用于读写的excel文件的库，对于数据处理并不友善，读取和处理大数据集时间比较长。</p><h3 id="方案二-pandas库"><a href="#方案二-pandas库" class="headerlink" title="方案二 pandas库"></a>方案二 pandas库</h3><p>Pandas是一个强大的分析结构化数据的工具集；它的使用基础是Numpy（提供高性能的矩阵运算）；用于数据挖掘和数据分析，同时也提供数据清洗功能。</p><h3 id="数据读取方法："><a href="#数据读取方法：" class="headerlink" title="数据读取方法："></a>数据读取方法：</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">data_csv = pd.read_csv(<span class="string">r&quot;../result/附件.csv&quot;</span>, encoding=<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;原始数据数量&quot;</span> + <span class="built_in">str</span>(<span class="built_in">len</span>(data_csv)))</span><br></pre></td></tr></table></figure><h2 id="数据预处理（数据清洗）"><a href="#数据预处理（数据清洗）" class="headerlink" title="数据预处理（数据清洗）"></a>数据预处理（数据清洗）</h2><p>官方并不会明确要求具体进行哪些预处理操作，到在解题时是必不可少的一步。在进行书写报告时，数据与预处理的每一步，在必要时说明执行的目的，并对步骤的结果进行解释</p><h3 id="数据去重"><a href="#数据去重" class="headerlink" title="数据去重"></a>数据去重</h3><p>目的： 针对所有数据进行数据去重</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># inplace=True 即直接对对象进行修改，否则操作不会保存，将结果返回</span></span><br><span class="line">data_csv.drop_duplicates(inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h3 id="去除空值"><a href="#去除空值" class="headerlink" title="去除空值"></a>去除空值</h3><p>目的：哈哈哈顾名思义</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># how = &#x27;any&#x27; 即去除所有的空值</span></span><br><span class="line">data_csv = data_csv.dropna(how=<span class="string">&#x27;any&#x27;</span>)</span><br></pre></td></tr></table></figure><h3 id="单位标准化"><a href="#单位标准化" class="headerlink" title="单位标准化"></a>单位标准化</h3><p>目的：减小精度对数据处理的干扰，故对数值进行标准化操作，保留五位小数；</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data_csv[<span class="string">&quot;销售金额&quot;</span>] = data_csv[<span class="string">&quot;销售金额&quot;</span>].<span class="built_in">round</span>(decimals=<span class="number">5</span>)</span><br></pre></td></tr></table></figure><h3 id="数据合法性检测"><a href="#数据合法性检测" class="headerlink" title="数据合法性检测"></a>数据合法性检测</h3><ol><li>日期合法性<br>日期进行合法性验证，将日期转化为datetime类型，将非法日期剔除，最后使用去空值操作去除。<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># errors=&#x27;coerce&#x27; 忽略不合法的值，置为null</span></span><br><span class="line">data_csv[<span class="string">&quot;销售日期&quot;</span>] = pd.to_datetime(data_csv[<span class="string">&quot;销售日期&quot;</span>],<span class="built_in">format</span>=<span class="string">&#x27;%Y%m%d&#x27;</span>,errors=<span class="string">&#x27;coerce&#x27;</span>)</span><br><span class="line">    <span class="built_in">print</span>(data_csv.isnull().<span class="built_in">sum</span>())</span><br><span class="line">    data_csv = data_csv.dropna(how=<span class="string">&#x27;any&#x27;</span>)</span><br></pre></td></tr></table></figure></li></ol><ol start="2"><li>验证销售金额、单价和数量<br>目的：销售金额与商品单价、销售数量的等式验证<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">data_csv_check = data_csv[data_csv[<span class="string">&quot;是否促销&quot;</span>]==<span class="string">&#x27;否&#x27;</span>].<span class="built_in">eval</span>(<span class="string">&#x27;应付减实付 =(商品单价*销售数量 - 销售金额)&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(data_csv_check[data_csv_check[<span class="string">&quot;应付减实付&quot;</span>] &gt; <span class="number">1</span>][<span class="string">&quot;大类名称&quot;</span>].value_counts())</span><br></pre></td></tr></table></figure> <img data-src="https://i.loli.net/2020/09/15/E7pxrKX5SJt8DRl.png" alt="结果" height="80%" width="80%"> 结果解释：首先排除促销商品的干扰，再筛选应付金额与实付金额的差值大于1元的数据有369条，最后通过聚类分析发现，差值大的数据集中在蔬果大类。故推断为超市对保鲜期将到的商品进行降价处理或用户选择附加服务（如：购买塑料袋等），对此部分数据不进行处理。</li></ol><ol start="3"><li>删除商品总额为零的数据<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data_csv = data_csv.drop(data_csv[data_csv[<span class="string">&quot;销售金额&quot;</span>] == <span class="number">0</span>].index)</span><br></pre></td></tr></table></figure> 结果解释：通过筛选发现商品总额为零的商品为联营商品，故选择不进行统计操作，将此部分数据删除。</li></ol><h3 id="异常数据处理"><a href="#异常数据处理" class="headerlink" title="异常数据处理"></a>异常数据处理</h3><p>目的：通过数据筛选发现存在商品单价与销售数量均为负数的数据，且可匹配到商品单价与销售数量均为其相反数的订单。 （在excel比对中发现）</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xiaoshoujine_fushu = data_csv[data_csv[<span class="string">&quot;销售金额&quot;</span>] &lt; <span class="number">0</span>]</span><br><span class="line">xiaoshoushuliang_fushu = data_csv[data_csv[<span class="string">&quot;销售数量&quot;</span>] &lt; <span class="number">0</span>]</span><br><span class="line"><span class="built_in">print</span>((xiaoshoujine_fushu == xiaoshoushuliang_fushu).<span class="built_in">sum</span>())</span><br></pre></td></tr></table></figure><p>结果解释：故推断为用户退货，将此部分数据删除；</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span> (<span class="built_in">len</span>(xiaoshoushuliang_fushu)):</span><br><span class="line">    data_csv.drop(data_csv[</span><br><span class="line">                        (data_csv[<span class="string">&quot;顾客编号&quot;</span>] == <span class="built_in">list</span>(xiaoshoushuliang_fushu[<span class="string">&quot;顾客编号&quot;</span>])[i]) &amp;</span><br><span class="line">                        (data_csv[<span class="string">&quot;小类名称&quot;</span>] == <span class="built_in">list</span>(xiaoshoushuliang_fushu[<span class="string">&quot;小类名称&quot;</span>])[i]) &amp;</span><br><span class="line">                        (<span class="built_in">abs</span>(data_csv[<span class="string">&quot;销售金额&quot;</span>]) == <span class="built_in">abs</span>(<span class="built_in">list</span>(xiaoshoushuliang_fushu[<span class="string">&quot;销售金额&quot;</span>])[i]))</span><br><span class="line">                    ].index, inplace=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><h3 id="数据冗余处理"><a href="#数据冗余处理" class="headerlink" title="数据冗余处理"></a>数据冗余处理</h3><p>数据冗余的主要办法是交叉验证</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(<span class="string">&quot;去冗余，交叉验证&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(data_csv[<span class="string">&#x27;小类编码&#x27;</span>],data_csv[<span class="string">&quot;商品编码&quot;</span>],margins_name=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;\n&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(data_csv[<span class="string">&#x27;小类编码&#x27;</span>],data_csv[<span class="string">&quot;小类名称&quot;</span>],margins_name=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(data_csv[<span class="string">&#x27;中类编码&#x27;</span>],data_csv[<span class="string">&quot;中类名称&quot;</span>],margins_name=<span class="literal">True</span>))</span><br><span class="line"><span class="built_in">print</span>(pd.crosstab(data_csv[<span class="string">&#x27;大类编码&#x27;</span>],data_csv[<span class="string">&quot;大类名称&quot;</span>],margins_name=<span class="literal">True</span>))</span><br><span class="line"></span><br><span class="line">data_csv.to_csv(<span class="string">r&quot;../result/task1_1.csv&quot;</span>, index=<span class="literal">False</span>,index_label=<span class="literal">False</span>,encoding=<span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;task1_1 completed&quot;</span>)</span><br></pre></td></tr></table></figure><p>结果解释：经过观察数据猜测商品编码与小类编码、小类编码与小类名称、中类编码与中类名称、大类编码与大类名称存在表达相同的特征值的情况。经过交叉验证，发现小类编码与小类名称、中类编码与中类名称、大类编码与大类名称存在表达相同的特征值的情况，商品编码与小类编码不存在表达相同的特征值的情况。</p><h2 id="数据统计"><a href="#数据统计" class="headerlink" title="数据统计"></a>数据统计</h2><p>这一步，官方给出了明确的要求，只要按部就班的照做就好。<br><img data-src="https://i.loli.net/2020/09/15/yhlmiRPCbfSk7Ud.png" alt="赛题任务1" height="80%" width="80%"><br>这道任务用的pandas库的DataFrame的基本操作加以阅读pandas官方文档并理解，即可完成。</p><ol><li>对于任务1.2编写函数，以“大类名称”字段名为索引，计算各大类商品总的销售金额。</li><li>对于任务1.3，仍然编写函数，以“中类名称”字段名为索引，将每个中类商品的促销销售金额和非促销销售金额统计进行直接筛选统计保存数据</li><li>对于任务1.4，生鲜类产品和一般产品的每周销售金额采取根据日期相对应的在一年中的周数打标签，再进行筛选，通过调用数据透视表函数进行销售额累加，最终生成新表；</li><li>对于任务1.5，编写筛选函数，将每位顾客每月的消费额及消费天数统计，首先按月分组消费数据，再通过程序对各月的顾客编号与销售金额、顾客编号与购买次数建立透视表，最后对数据进行整合保存。</li></ol><h2 id="数据分析与可视化"><a href="#数据分析与可视化" class="headerlink" title="数据分析与可视化"></a>数据分析与可视化</h2><p>这一步，不仅仅是pandas与numpy库的运用，还有使用matlibplot库进行绘图。<br><img data-src="https://i.loli.net/2020/09/15/4LI9GolaJxsNUkD.png" alt="赛题任务2" height="80%" width="80%"></p><ol><li>对于任务2.1，首先将数据对商品类型进行筛选分为生鲜类和一般商品类，再使用透视表统计隔日销售额，最后调用相关绘图函数，完成绘图；</li><li>对于任务2.2，首先按销售月份筛选数据，再按照大类名称建立与销售金额的透视表，最后完成绘图；</li><li>对于任务2.3，首先通过是否促销进行数据筛选，再获取当前日期所对应的在一年之中对应的周数，分别建立周数与销售金额的透视表，完成绘图；</li></ol><h2 id="用户画像与策略"><a href="#用户画像与策略" class="headerlink" title="用户画像与策略"></a>用户画像与策略</h2><p>用户画像我们使用了wordcloud词云进行绘制虽然不够美观但是表示还是清晰的<br><img data-src="https://i.loli.net/2020/09/15/tkSGU63l8RfpZTP.png" alt="赛题任务3" height="80%" width="80%"></p><ol><li>对于任务3.1，以顾客编号为筛选条件，对用户消费金额获取透视表，并进行排序取前10名顾客的用户编号，再获取这十名顾客的消费详情，根据金额绘制用户画像，根据消费金额比重绘制用户画像，总体上均可看出一个消费者的消费喜好。</li><li>对于任务3.2，根据各大类名对数据进行筛选，具体为获取总表DataFrame的各大类名然后去重获取不同类名；然后根据类名对数据进行分割，获取各个类对应的数据。最后对每个类每天各自的每日销售量和销售总额分别进行进行汇总得到新的数据源。根据新数据源进行绘图。</li><li>对于任务3.3，以大类名称为标签索引，通过计算促销商品的日均销售额（促销商品总额/进行促销的总天数）与非促销商品的日均销售额（非促销商品总额/进行促销的总天数）得出他们的柱状对比图。</li></ol><h2 id="结束语"><a href="#结束语" class="headerlink" title="结束语"></a>结束语</h2><p>如果有哪里没写对，没写好的地方，欢迎提出，一起探讨。对于后面几道主观题的结果还是不进行分享了。主要分享一下解题的思路，说不定大家有更好的答案，题目、每个任务的代码、过程数据和结果放在了开头的代码仓库。这次技能赛，虽说没能到达最后的答辩，争取泰迪杯。但是在赛前一天就速通pandas和numpy的各种函数与操作，比赛当天一起百度，查库函数的官方文档，还能拿到一等，回想起来还是很刺激。感谢波神和昌洲大佬。合作愉快^_^!</p><h2 id="题外话"><a href="#题外话" class="headerlink" title="题外话"></a>题外话</h2><p>今年似乎爬虫又回归了，根据参加第一届数据挖掘比赛的同学和师兄回忆，第一届的时候，官方给出的是一个的网站，大家需要自行编写爬虫，爬取所需要的信息。也可以自己额外爬取其他网站增加数据。从我第一感觉上来说，理论上是应该不会有反爬的操作，要不然这比赛也太刺激了吧。要自行编写爬虫，这就意味着参赛的同学，要对网页结构有初步的理解。这个可以百度下html了解一下，上手难度不会太大。按照我以往的编写爬虫经验，给出一些的好用的库参考下吧。</p><ol><li><p>方案一： scrapy爬虫框架<br>强大的爬虫框架，功能强大，需要一定的时间上手。最好能理解架构。</p></li><li><p>方案二： requests + BeautifulSoup + 正则表达式<br>这个方案是我最熟悉的一个方案，<br>requests库 负责完成网页请求，获取网页信息。<br>对于反爬，可以加上headers，proxy，cockies等必要信息，控制访问频率，来应对反爬虫，使你的行为更像真实用户<br>在没有反爬虫时或者反爬虫技术失效时，可以采用多进程，提高爬虫效率，不建议对正常运行的网站这么做，会给网站运维和其他访问用户增加压力。一些网站会在网站上添加robots.txt，告知对应的爬虫被允许的权限。当然这也是君子协定哈哈。<br>BeautifulSoup库 负责完成请求结构解析，并以树的形式进行封装，方便用户索引。<br>正则表达式则是在BeautifulSoup库，不好用的时候，直接进行文本匹配，暴力获取的方法。</p></li><li><p>方案三：八爪鱼采集器<br>一款爬虫软件，一站式服务，不用自己编程，但是有些功能需要人民币才能解决。</p> <img data-src="https://i.loli.net/2020/09/15/Tb3GkEUpQwr7a6X.png" alt="手动滑稽" height="80%" width="80%"></li></ol><p>对于数据存储这一块，为了简单的话，可以考虑存成csv，或者说excel表格，python自带csv库，写是挺方便的。<br>有能力的话可以考虑数据库，常用的SQL语言也就四句（增删改查）：insert， update， delete， select</p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> Mistgun</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://blog.marques22.com/archives/d19c3d76.html" title="2019泰迪杯数据分析技能赛B题心得 ">https://blog.marques22.com/archives/d19c3d76.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/%E6%B3%B0%E8%BF%AA%E6%9D%AF/" rel="tag"># 泰迪杯</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/" rel="tag"># 数据分析</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/e39d07fb.html" rel="prev" title="Git简单使用"><i class="fa fa-chevron-left"></i> Git简单使用</a></div><div class="post-nav-item"> <a href="/archives/d41bc916.html" rel="next" title="Jupyter-lab 3.0 安装、配置并选择虚拟环境开机启动">Jupyter-lab 3.0 安装、配置并选择虚拟环境开机启动<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#2019%E6%B3%B0%E8%BF%AA%E6%9D%AF%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E6%8A%80%E8%83%BD%E8%B5%9BB%E9%A2%98%E5%BF%83%E5%BE%97"><span class="nav-number">1.</span> <span class="nav-text">2019泰迪杯数据分析技能赛B题心得</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BB%E5%8F%96%E5%AE%98%E6%96%B9%E6%95%B0%E6%8D%AE"><span class="nav-number">1.1.</span> <span class="nav-text">读取官方数据</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%A1%88%E4%B8%80-openpyxl%E5%BA%93"><span class="nav-number">1.1.1.</span> <span class="nav-text">方案一 openpyxl库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B9%E6%A1%88%E4%BA%8C-pandas%E5%BA%93"><span class="nav-number">1.1.2.</span> <span class="nav-text">方案二 pandas库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E6%96%B9%E6%B3%95%EF%BC%9A"><span class="nav-number">1.1.3.</span> <span class="nav-text">数据读取方法：</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86%EF%BC%88%E6%95%B0%E6%8D%AE%E6%B8%85%E6%B4%97%EF%BC%89"><span class="nav-number">1.2.</span> <span class="nav-text">数据预处理（数据清洗）</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%8E%BB%E9%87%8D"><span class="nav-number">1.2.1.</span> <span class="nav-text">数据去重</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%BB%E9%99%A4%E7%A9%BA%E5%80%BC"><span class="nav-number">1.2.2.</span> <span class="nav-text">去除空值</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%95%E4%BD%8D%E6%A0%87%E5%87%86%E5%8C%96"><span class="nav-number">1.2.3.</span> <span class="nav-text">单位标准化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%90%88%E6%B3%95%E6%80%A7%E6%A3%80%E6%B5%8B"><span class="nav-number">1.2.4.</span> <span class="nav-text">数据合法性检测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%82%E5%B8%B8%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86"><span class="nav-number">1.2.5.</span> <span class="nav-text">异常数据处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%86%97%E4%BD%99%E5%A4%84%E7%90%86"><span class="nav-number">1.2.6.</span> <span class="nav-text">数据冗余处理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E7%BB%9F%E8%AE%A1"><span class="nav-number">1.3.</span> <span class="nav-text">数据统计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="nav-number">1.4.</span> <span class="nav-text">数据分析与可视化</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%94%BB%E5%83%8F%E4%B8%8E%E7%AD%96%E7%95%A5"><span class="nav-number">1.5.</span> <span class="nav-text">用户画像与策略</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%93%E6%9D%9F%E8%AF%AD"><span class="nav-number">1.6.</span> <span class="nav-text">结束语</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A2%98%E5%A4%96%E8%AF%9D"><span class="nav-number">1.7.</span> <span class="nav-text">题外话</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Marques" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">Marques</p><div class="site-description" itemprop="description">Linux系统，计算机网络，深度学习分享</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">10</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">17</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/mmmistgun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;mmmistgun" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a></span><span class="links-of-author-item"><a href="https://gitea.lh.marques22.com/marques" title="Gitea → https:&#x2F;&#x2F;gitea.lh.marques22.com&#x2F;marques" rel="noopener" target="_blank"><i class="fa fa-coffee fa-fw"></i></a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fas fa-rss fa-fw"></i></a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2020 – <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-user-circle"></i></span> <span class="author" itemprop="copyrightHolder">Marques</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-chart-area"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">12k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">14 分钟</span></div> <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("03/30/2020 22:38:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><div class="busuanzi-count"><script data-pjax async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/gh/theme-next/theme-next-pjax@0/pjax.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script>
var pjax = new Pjax({
  selectors: [
    'head title',
    '#page-configurations',
    '.content-wrap',
    '.post-toc-wrap',
    '.languages',
    '#pjax'
  ],
  switches: {
    '.post-toc-wrap': Pjax.switches.innerHTML
  },
  analytics: false,
  cacheBust: false,
  scrollTo : !CONFIG.bookmark.enable
});

window.addEventListener('pjax:success', () => {
  document.querySelectorAll('script[data-pjax], script#page-configurations, #pjax script').forEach(element => {
    var code = element.text || element.textContent || element.innerHTML || '';
    var parent = element.parentNode;
    parent.removeChild(element);
    var script = document.createElement('script');
    if (element.id) {
      script.id = element.id;
    }
    if (element.className) {
      script.className = element.className;
    }
    if (element.type) {
      script.type = element.type;
    }
    if (element.src) {
      script.src = element.src;
      // Force synchronous loading of peripheral JS.
      script.async = false;
    }
    if (element.dataset.pjax !== undefined) {
      script.dataset.pjax = '';
    }
    if (code !== '') {
      script.appendChild(document.createTextNode(code));
    }
    parent.appendChild(script);
  });
  NexT.boot.refresh();
  // Define Motion Sequence & Bootstrap Motion.
  if (CONFIG.motion.enable) {
    NexT.motion.integrator
      .init()
      .add(NexT.motion.middleWares.subMenu)
      .add(NexT.motion.middleWares.postList)
      .bootstrap();
  }
  NexT.utils.updateSidebarPosition();
});
</script><script src="/js/local-search.js"></script><div id="pjax"><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'wPSNl2UyaGXgDoIEUwvq1F3e-MdYXbMMI',
      appKey     : 'vSpgMoko7k9LhPJbdEQW0Xz1',
      placeholder: "在这里输入评论",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : false,
      serverURLs : ''
    });
  }, window.Valine);
});
</script></div></body></html>