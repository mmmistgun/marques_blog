<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-mistgun.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-mistgun.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/all.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"blog.marques22.com",root:"/",scheme:"Pisces",version:"7.8.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!0,show_result:!0,style:"mac"},back2top:{enable:!0,sidebar:!1,scrollpercent:!0},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!0,comments:{style:"tabs",active:"valine",storage:!0,lazyload:!1,nav:null,activeClass:"valine"},algolia:{hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},motion:{enable:!0,async:!0,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},path:"search.xml"}</script><meta name="description" content="frp实现内网穿透 最简配置内网环境现在可以说非常的普遍，如果连接控制的内网环境设备的话，就变得非常不方便，像端口映射，dmz主机已经不能满足我们的要。不过好在现在实现内网穿透的工具也很多，在这里就记录下一这款配置简单，功能强大的内网穿透工具FRP的配置实战。"><meta property="og:type" content="article"><meta property="og:title" content="frp实现内网穿透"><meta property="og:url" content="https://blog.marques22.com/archives/f51df9f4.html"><meta property="og:site_name" content="Marques&#39; Blog"><meta property="og:description" content="frp实现内网穿透 最简配置内网环境现在可以说非常的普遍，如果连接控制的内网环境设备的话，就变得非常不方便，像端口映射，dmz主机已经不能满足我们的要。不过好在现在实现内网穿透的工具也很多，在这里就记录下一这款配置简单，功能强大的内网穿透工具FRP的配置实战。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i.loli.net/2019/08/07/nVewEJStvhZoa2M.png"><meta property="og:image" content="https://i.loli.net/2019/08/07/NGtshPACQlv2fYH.png"><meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvcUJ6OEZheGxTNXR5UkRnLnBuZw"><meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvVlViZlB2UUNXMmt1SVNILnBuZw"><meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvQkM3Vk80YnFSalBUWjJVLnBuZw"><meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvRVVLaTVQQjRhUmpWazlxLnBuZw"><meta property="og:image" content="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvOTJhN2VnRnhFUHVsd1N0LnBuZw"><meta property="article:published_time" content="2020-03-30T14:25:00.000Z"><meta property="article:modified_time" content="2021-08-18T05:38:03.353Z"><meta property="article:author" content="Marques"><meta property="article:tag" content="frp"><meta property="article:tag" content="ubuntu"><meta property="article:tag" content="linux"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.loli.net/2019/08/07/nVewEJStvhZoa2M.png"><link rel="canonical" href="https://blog.marques22.com/archives/f51df9f4.html"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>frp实现内网穿透 | Marques' Blog</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-145116812-1"></script><script>if(CONFIG.hostname===location.hostname){function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-145116812-1")}</script><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><link rel="alternate" href="/atom.xml" title="Marques' Blog" type="application/atom+xml"></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span><h1 class="site-title">Marques' Blog</h1><span class="logo-line-after"><i></i></span></a><p class="site-subtitle" itemprop="description">随缘更新</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul id="menu" class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i> 首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i> 分类</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i> 标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i> 归档</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i> 站点地图</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i> 关于</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i> 搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"> <input autocomplete="off" autocapitalize="off" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"><div id="no-result"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div> <a href="https://github.com/mmmistgun" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0 0 115 115 130 115 142 142 250 250 250 0Z"></path><path d="M128.3 109C113.8 99.7 119 89.6 119 89.6 122 82.7 120.5 78.6 120.5 78.6 119.2 72 123.4 76.3 123.4 76.3 127.3 80.9 125.5 87.3 125.5 87.3 122.9 97.6 130.6 101.9 134.4 103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115 115C114.9 115.1 118.7 116.5 119.8 115.4L133.7 101.6C136.9 99.2 139.9 98.4 142.2 98.6 133.8 88 127.5 74.4 143.8 58 148.5 53.4 154 51.2 159.7 51 160.3 49.4 163.2 43.6 171.4 40.1 171.4 40.1 176.1 42.5 178.8 56.2 183.1 58.6 187.2 61.8 190.9 65.4 194.5 69 197.7 73.2 200.1 77.6 213.8 80.2 216.3 84.9 216.3 84.9 212.7 93.1 206.9 96 205.4 96.6 205.1 102.4 203 107.8 198.3 112.5 181.9 128.9 168.3 122.5 157.7 114.1 157.9 116.9 156.7 120.9 152.7 124.9L141 136.5C139.8 137.7 141.6 141.9 141.8 141.8Z" fill="currentColor" class="octo-body"></path></svg></a><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://blog.marques22.com/archives/f51df9f4.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Marques"><meta itemprop="description" content="Linux系统，计算机网络，深度学习分享"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Marques' Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline"> frp实现内网穿透</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i></span> <span class="post-meta-item-text">发表于</span> <time title="创建时间：2020-03-30 22:25:00" itemprop="dateCreated datePublished" datetime="2020-03-30T22:25:00+08:00">2020-03-30</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i></span> <span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-08-18 13:38:03" itemprop="dateModified" datetime="2021-08-18T13:38:03+08:00">2021-08-18</time></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i></span> <span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/" itemprop="url" rel="index"><span itemprop="name">内网穿透</span></a></span></span><span id="/archives/f51df9f4.html" class="post-meta-item leancloud_visitors" data-flag-title="frp实现内网穿透" title="阅读次数"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span class="leancloud-visitors-count"></span></span><span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span> <span class="post-meta-item-text">阅读次数：</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i></span> <span class="post-meta-item-text">Valine：</span><a title="valine" href="/archives/f51df9f4.html#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/archives/f51df9f4.html" itemprop="commentCount"></span></a></span><br><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i></span> <span class="post-meta-item-text">本文字数：</span> <span>1.5k</span></span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i></span> <span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="frp实现内网穿透-最简配置"><a href="#frp实现内网穿透-最简配置" class="headerlink" title="frp实现内网穿透 最简配置"></a><strong>frp实现内网穿透 最简配置</strong></h1><p>内网环境现在可以说非常的普遍，如果连接控制的内网环境设备的话，就变得非常不方便，像端口映射，dmz主机已经不能满足我们的要。不过好在现在实现内网穿透的工具也很多，在这里就记录下一这款配置简单，功能强大的内网穿透工具FRP的配置实战。</p><span id="more"></span><h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>公网服务器：Ubuntu系统16.04（阿里云ECS，学生优惠你懂的，SSH 1M带宽够用了）<br>内网受控设备：Ubuntu系统16.04<br>主动访问设备：Windows10</p><p><a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/releases/tag/v0.28.0">FRP版本0.28.0</a>因为FRP有<a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/blob/master/README_zh.md">中文文档</a>，所以配置起来非常友好。</p><h2 id="服务器配置"><a href="#服务器配置" class="headerlink" title="服务器配置"></a>服务器配置</h2><p>远程配置阿里云ECS，全程用命令行就可以搞定。<br>查看架构(仅适用于linux)：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arch</span><br></pre></td></tr></table></figure><p>x86_64对应的是linux_amd64,下载frp时选择</p><p><img data-src="https://i.loli.net/2019/08/07/nVewEJStvhZoa2M.png"></p><h3 id="1、跳转到根目录"><a href="#1、跳转到根目录" class="headerlink" title="1、跳转到根目录"></a>1、跳转到根目录</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /root</span><br></pre></td></tr></table></figure><h3 id="2、从地址下载"><a href="#2、从地址下载" class="headerlink" title="2、从地址下载"></a>2、从地址下载</h3><p>从链接中我们可以看出版本号，获得更新的版本以此类推，修改连接中的两组数字就好了，可以从作者的release中获得</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate https:<span class="comment">//github.com/fatedier/frp/releases/download/v0.28.0/frp_0.28.0_linux_amd64.tar.gz</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="3、解压文件夹"><a href="#3、解压文件夹" class="headerlink" title="3、解压文件夹"></a>3、解压文件夹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -xzvf frp_0<span class="number">.28</span>.0_linux_amd64.tar.gz</span><br></pre></td></tr></table></figure><details><summary><font color="darked">tar解压命令</font></summary><p>必选且仅能一个的参数有<br>-c: 建立压缩档案<br>-x：解压<br>-t：查看内容<br>-r：向压缩归档文件末尾追加文件<br>-u：更新原压缩包中的文件</p><p>可选参数有：<br>-z：有gzip属性的<br>-j：有bz2属性的<br>-Z：有compress属性的<br>-v：显示所有过程<br>-O：将文件解开到标准输出</p><p>-f: 使用档案名字，最后一个参数且是必选</p></details><h3 id="4、重命名减小名字长度"><a href="#4、重命名减小名字长度" class="headerlink" title="4、重命名减小名字长度"></a>4、重命名减小名字长度</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mv frp_0<span class="number">.28</span>.0_linux_amd64 frp</span><br></pre></td></tr></table></figure><details><summary><font color="darked">mv 命令其实就是移动</font></summary><p>第一个参数时要移动的文件或文件夹的路径，缩略不写则为当前路径。</p><p>第二个参数时目标路径，并以后者名字保存<br><strong>cp</strong>是复制命令</p></details><h3 id="5、跳转到文件夹frp"><a href="#5、跳转到文件夹frp" class="headerlink" title="5、跳转到文件夹frp"></a>5、跳转到文件夹frp</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd frp</span><br></pre></td></tr></table></figure><h3 id="6、-修改权限"><a href="#6、-修改权限" class="headerlink" title="6、 修改权限"></a>6、 修改权限</h3><p>为了保证我们要执行的程序<strong>frps</strong>拥有足够的权限所以执行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x frps</span><br></pre></td></tr></table></figure><p><a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-comm-chmod.html">chmod命令用法</a></p><h3 id="7、尝试启动"><a href="#7、尝试启动" class="headerlink" title="7、尝试启动"></a>7、尝试启动</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./frps --help</span><br></pre></td></tr></table></figure><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">./</span></span><br></pre></td></tr></table></figure><p>表示的是当前路径</p><figure class="highlight jboss-cli"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">../</span></span><br></pre></td></tr></table></figure><p>表示的是当前路径的上级目录</p><h3 id="8、修改配置文件"><a href="#8、修改配置文件" class="headerlink" title="8、修改配置文件"></a>8、修改配置文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim ./frps.ini</span><br></pre></td></tr></table></figure><p>*如果显示commond not found的话，可以考虑 sudo apt-get install vim，安装一下<br>或者使用vi ./frps.ini<br>frpc.ini 是<strong>客户端</strong>（client）的配置文件</p><p>frpc_full.ini 存放了所有<strong>客户端</strong>可以选择的配置选项</p><p>frps.ini 是<strong>服务端</strong>（service）的配置文件</p><p>frps_full.ini 存放了所以<strong>服务端</strong>可以选择的配置选项<br>而且官方还提供了完整的<a target="_blank" rel="noopener" href="https://github.com/fatedier/frp/blob/master/README_zh.md#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">中文说明</a></p><p>*对于<a target="_blank" rel="noopener" href="https://www.runoob.com/linux/linux-vim.html">vim常用指令</a>在度娘上也有很多，简单易上手。<br>常用的有（注意区分大小写）<br>ESC 回到命令模式<br>i 插入模式<br>dd 删除当前行<br>保存退出的方法：ESC → 输入wq</p><p>对于Xshell中vim小键盘输入会出现字母的情况可以更改 属性→终端→终端配置来解决</p><p><img data-src="https://i.loli.net/2019/08/07/NGtshPACQlv2fYH.png"></p><p>以下是我使用的配置</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#[common]为必填项</span><br><span class="line">[common]</span><br><span class="line"></span><br><span class="line">#绑定端口为<span class="number">7000</span>，客户端连接服务端时需填写相应的端口，阿里云ECS需要在安全组中开放这些端口才能使用</span><br><span class="line">bind_port = <span class="number">7000</span></span><br><span class="line"></span><br><span class="line">#仪表盘配置[可以根据自己的需要来设置，可以不设置]</span><br><span class="line">#分别为地址、端口、登陆账号和密码，可以查看当前的frp服务状态</span><br><span class="line">#可以通过在浏览器，输入你的服务器IP + : +仪表盘端口号访问</span><br><span class="line">#假设你的服务器IP为<span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>，则访问地址为<span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">4000</span></span><br><span class="line">#账号密码不设置默认为admin</span><br><span class="line">dashboard_addr = <span class="number">0.0</span><span class="number">.0</span><span class="number">.0</span></span><br><span class="line">dashboard_port = <span class="number">7001</span></span><br><span class="line">dashboard_user = admin</span><br><span class="line">dashboard_pwd = admin</span><br><span class="line"></span><br><span class="line">#[连接口令/密码] 建议设置，这样别人就不能在没有口令的情况下使用你的服务器作为FRP服务器了</span><br><span class="line">token = <span class="number">123456789</span></span><br></pre></td></tr></table></figure><p>实操如图：<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvcUJ6OEZheGxTNXR5UkRnLnBuZw" alt="image.png"><br>DAMN IT!忘记保存了······再来<br>ATOM不会自动保存···菜啊</p><h3 id="9-1-运行"><a href="#9-1-运行" class="headerlink" title="9.1 运行"></a>9.1 运行</h3><figure class="highlight awk"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">.<span class="regexp">/frps -c ./</span>frps.ini</span><br></pre></td></tr></table></figure><p>如图开启成功：<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvVlViZlB2UUNXMmt1SVNILnBuZw" alt="image.png"><br>但是这种方法需要保持SSH连接，才能正常运行</p><h3 id="9-2-后台运行"><a href="#9-2-后台运行" class="headerlink" title="9.2 后台运行"></a>9.2 后台运行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./frps -c ./frps.ini <span class="number">2</span>&gt;&amp;<span class="number">1</span> ./nohup.out &amp;</span><br></pre></td></tr></table></figure><p>nohup: 程序不会挂起<br>2&gt;&amp;1 nohup.out: 将日志输出到当前目录下nohup.out文件中<br>最后一个 &amp; ：后台运行<br>这样就可以保证frp后台运行，即使关闭SSH连接也不受影响</p><h3 id="9-3-结束运行"><a href="#9-3-结束运行" class="headerlink" title="9.3 结束运行"></a>9.3 结束运行</h3><p>方法一：使用pkill [程序名] 直接结束程序</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill frps</span><br></pre></td></tr></table></figure><p>方法二：使用ps -ef|grep “frps”查询进程号再用kill [进程号结束]</p><figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -ef|<span class="keyword">grep</span> <span class="string">&quot;frps&quot;</span></span><br><span class="line"><span class="comment"># 获取进程号,最右边是执行的命令，最左边的数字是进程号，假设进程号是1234</span></span><br><span class="line"><span class="keyword">kill</span> <span class="number">1234</span></span><br></pre></td></tr></table></figure><p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvQkM3Vk80YnFSalBUWjJVLnBuZw" alt="image.png"></p><h2 id="配置受控端"><a href="#配置受控端" class="headerlink" title="配置受控端"></a>配置受控端</h2><p>受控端的frp下载方法和服务器的步骤一样，所以参照1到5就好了，权限的话，可以不用配置</p><h3 id="10-修改配置文件"><a href="#10-修改配置文件" class="headerlink" title="10 修改配置文件"></a>10 修改配置文件</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim frpc.ini</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[common]</span><br><span class="line">#服务器IP地址，也可以是域名，甚至是IPv6地址，不过要再两侧添加方括号，假设我的服务器IP是<span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">server_addr = <span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span></span><br><span class="line">#服务器设置的绑定端口</span><br><span class="line">server_port = <span class="number">7000</span></span><br><span class="line">#服务器设置的密钥</span><br><span class="line">token = <span class="number">123456789</span></span><br><span class="line"></span><br><span class="line">[tcp_port]</span><br><span class="line">#因为SSH属于TCP的一种，所以类型选择TCP，还有HTTP, STCP, XTCP等可以根据自己的需要设置</span><br><span class="line">type = tcp</span><br><span class="line">#本地IP一般都是<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> 这个不用改</span><br><span class="line">local_ip = <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">#待转发的端口号，SSH默认是<span class="number">22</span></span><br><span class="line">local_port = <span class="number">22</span></span><br><span class="line">#远程端口号，使用[服务器IP:远程端口]将可以访问本地（受控端）的<span class="number">22</span>号端口，在本示例中即<span class="number">1.1</span><span class="number">.1</span><span class="number">.1</span>:<span class="number">15626</span></span><br><span class="line">remote_port = <span class="number">15626</span></span><br></pre></td></tr></table></figure><p><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvRVVLaTVQQjRhUmpWazlxLnBuZw" alt="image.png"></p><h3 id="11-运行"><a href="#11-运行" class="headerlink" title="11 运行"></a>11 运行</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nohup ./frps -c ./frps.ini <span class="number">2</span>&gt;&amp;<span class="number">1</span> ./nohup.out &amp;</span><br></pre></td></tr></table></figure><p>至此服务和受控端都配置完成了！</p><h2 id="XShell连接"><a href="#XShell连接" class="headerlink" title="XShell连接"></a>XShell连接</h2><p>在Windows10使用XShell，secureCRT，Putty之类的软件就可以对内网的Ubuntu进行远程连接了<br><img data-src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pLmxvbGkubmV0LzIwMTkvMDgvMDcvOTJhN2VnRnhFUHVsd1N0LnBuZw" alt="connect.png"></p><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p>[1]<a target="_blank" rel="noopener" href="https://moe.best/tutorial/frp.html">内网穿透神器搭建 萌新也看得懂的教程系列</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"> <strong>本文作者：</strong> Mistgun</li><li class="post-copyright-link"> <strong>本文链接：</strong> <a href="https://blog.marques22.com/archives/f51df9f4.html" title="frp实现内网穿透">https://blog.marques22.com/archives/f51df9f4.html</a></li><li class="post-copyright-license"> <strong>版权声明：</strong> 本博客所有文章除特别声明外，均采用<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i> BY-NC-SA</a> 许可协议。转载请注明出处！</li></ul></div><div class="followme"><p>欢迎关注我的其它发布渠道</p><div class="social-list"><div class="social-item"><a target="_blank" class="social-link" href="/atom.xml"><span class="icon"><i class="fa fa-rss"></i></span> <span class="label">RSS</span></a></div></div></div><footer class="post-footer"><div class="post-tags"> <a href="/tags/frp/" rel="tag"># frp</a> <a href="/tags/ubuntu/" rel="tag"># ubuntu</a> <a href="/tags/linux/" rel="tag"># linux</a></div><div class="post-nav"><div class="post-nav-item"><a href="/archives/91185781.html" rel="prev" title="记第一次搭建博客遇到的问题"><i class="fa fa-chevron-left"></i> 记第一次搭建博客遇到的问题</a></div><div class="post-nav-item"> <a href="/archives/b9b5d2fc.html" rel="next" title="Windows10 LTSC 使用照片查看器">Windows10 LTSC 使用照片查看器<i class="fa fa-chevron-right"></i></a></div></div></footer></article></div><div class="comments" id="valine-comments"></div><script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span><span class="toggle-line toggle-line-middle"></span><span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc"> 文章目录</li><li class="sidebar-nav-overview"> 站点概览</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#frp%E5%AE%9E%E7%8E%B0%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F-%E6%9C%80%E7%AE%80%E9%85%8D%E7%BD%AE"><span class="nav-number">1.</span> <span class="nav-text">frp实现内网穿透 最简配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83"><span class="nav-number">1.1.</span> <span class="nav-text">环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%85%8D%E7%BD%AE"><span class="nav-number">1.2.</span> <span class="nav-text">服务器配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1%E3%80%81%E8%B7%B3%E8%BD%AC%E5%88%B0%E6%A0%B9%E7%9B%AE%E5%BD%95"><span class="nav-number">1.2.1.</span> <span class="nav-text">1、跳转到根目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2%E3%80%81%E4%BB%8E%E5%9C%B0%E5%9D%80%E4%B8%8B%E8%BD%BD"><span class="nav-number">1.2.2.</span> <span class="nav-text">2、从地址下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3%E3%80%81%E8%A7%A3%E5%8E%8B%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">1.2.3.</span> <span class="nav-text">3、解压文件夹</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4%E3%80%81%E9%87%8D%E5%91%BD%E5%90%8D%E5%87%8F%E5%B0%8F%E5%90%8D%E5%AD%97%E9%95%BF%E5%BA%A6"><span class="nav-number">1.2.4.</span> <span class="nav-text">4、重命名减小名字长度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5%E3%80%81%E8%B7%B3%E8%BD%AC%E5%88%B0%E6%96%87%E4%BB%B6%E5%A4%B9frp"><span class="nav-number">1.2.5.</span> <span class="nav-text">5、跳转到文件夹frp</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6%E3%80%81-%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90"><span class="nav-number">1.2.6.</span> <span class="nav-text">6、 修改权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7%E3%80%81%E5%B0%9D%E8%AF%95%E5%90%AF%E5%8A%A8"><span class="nav-number">1.2.7.</span> <span class="nav-text">7、尝试启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8%E3%80%81%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.2.8.</span> <span class="nav-text">8、修改配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-%E8%BF%90%E8%A1%8C"><span class="nav-number">1.2.9.</span> <span class="nav-text">9.1 运行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-%E5%90%8E%E5%8F%B0%E8%BF%90%E8%A1%8C"><span class="nav-number">1.2.10.</span> <span class="nav-text">9.2 后台运行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-3-%E7%BB%93%E6%9D%9F%E8%BF%90%E8%A1%8C"><span class="nav-number">1.2.11.</span> <span class="nav-text">9.3 结束运行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E5%8F%97%E6%8E%A7%E7%AB%AF"><span class="nav-number">1.3.</span> <span class="nav-text">配置受控端</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#10-%E4%BF%AE%E6%94%B9%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">1.3.1.</span> <span class="nav-text">10 修改配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E8%BF%90%E8%A1%8C"><span class="nav-number">1.3.2.</span> <span class="nav-text">11 运行</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#XShell%E8%BF%9E%E6%8E%A5"><span class="nav-number">1.4.</span> <span class="nav-text">XShell连接</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"><span class="nav-number">1.5.</span> <span class="nav-text">参考文章</span></a></li></ol></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"> <img class="site-author-image" itemprop="image" alt="Marques" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">Marques</p><div class="site-description" itemprop="description">Linux系统，计算机网络，深度学习分享</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"> <a href="/archives/"><span class="site-state-item-count">9</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"> <a href="/categories/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"> <a href="/tags/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/mmmistgun" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;mmmistgun" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i></a></span><span class="links-of-author-item"><a href="https://gitea.lh.marques22.com/marques" title="Gitea → https:&#x2F;&#x2F;gitea.lh.marques22.com&#x2F;marques" rel="noopener" target="_blank"><i class="fa fa-coffee fa-fw"></i></a></span><span class="links-of-author-item"><a href="/atom.xml" title="RSS → &#x2F;atom.xml"><i class="fas fa-rss fa-fw"></i></a></span></div><div class="cc-license motion-element" itemprop="license"> <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright"> &copy; 2020 – <span itemprop="copyrightYear">2021</span><span class="with-love"><i class="fa fa-user-circle"></i></span> <span class="author" itemprop="copyrightHolder">Marques</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-chart-area"></i></span> <span class="post-meta-item-text">站点总字数：</span> <span title="站点总字数">12k</span> <span class="post-meta-divider">|</span><span class="post-meta-item-icon"><i class="fa fa-coffee"></i></span> <span class="post-meta-item-text">站点阅读时长 &asymp;</span> <span title="站点阅读时长">13 分钟</span></div> <span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span><script>var now=new Date;function createtime(){var n=new Date("03/30/2020 22:38:00");now.setTime(now.getTime()+250),days=(now-n)/1e3/60/60/24,dnum=Math.floor(days),hours=(now-n)/1e3/60/60-24*dnum,hnum=Math.floor(hours),1==String(hnum).length&&(hnum="0"+hnum),minutes=(now-n)/1e3/60-1440*dnum-60*hnum,mnum=Math.floor(minutes),1==String(mnum).length&&(mnum="0"+mnum),seconds=(now-n)/1e3-86400*dnum-3600*hnum-60*mnum,snum=Math.round(seconds),1==String(snum).length&&(snum="0"+snum),document.getElementById("timeDate").innerHTML="本站已运行 "+dnum+" 天 ",document.getElementById("times").innerHTML=hnum+" 小时 "+mnum+" 分 "+snum+" 秒"}setInterval("createtime()",250)</script><div class="busuanzi-count"><script async src="https://cdn.jsdelivr.net/npm/busuanzi@2.3.0/bsz.pure.mini.js"></script><span class="post-meta-item" id="busuanzi_container_site_uv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-user"></i></span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span></span></span> <span class="post-meta-divider">|</span><span class="post-meta-item" id="busuanzi_container_site_pv" style="display:none"><span class="post-meta-item-icon"><i class="fa fa-eye"></i></span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer></div><script src="//cdn.jsdelivr.net/npm/animejs@3.1.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1/dist/lozad.min.js"></script><script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/valine@1/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'wPSNl2UyaGXgDoIEUwvq1F3e-MdYXbMMI',
      appKey     : 'vSpgMoko7k9LhPJbdEQW0Xz1',
      placeholder: "在这里输入评论",
      avatar     : 'wavatar',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : 'zh-cn' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script></body></html>